

<!DOCTYPE html>
<html>
<head>
    <title>Calculadora de Troca Térmica</title>
    <style>
        body { font-family: sans-serif; margin: 20px; padding: 20px; background-color: #f4f4f4; }
        h1, h2 { color: #333; }
        label { display: inline-block; margin-bottom: 5px; font-weight: bold; }
        input[type="number"] { padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 15px; background-color: #5cb85c; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #4cae4c; }
        #results { margin-top: 15px; padding: 10px; border: 1px solid #dcdcdc; background-color: #fff; border-radius: 4px; }
        #diagram { position: relative; width: 500px; height: 200px; margin-top: 20px; background-color: #fff; border-radius: 4px; overflow: hidden; }
        .tank { position: absolute; top: 80px; left: 20px; width: 460px; height: 50px; background: linear-gradient(to right, #87cefa, #e0f7ff); border: 4px solid #555; border-radius: 20px; }
        .sensor { position: absolute; width: 20px; height: 20px; background-color: red; border-radius: 50%; border: 2px solid #333; }
        .sensor-label { position: absolute; font-size: 12px; font-weight: bold; color: #333; top: 50px; }
        .temp-label { position: absolute; font-size: 12px; font-weight: bold; color: #000; top: 140px; }
        .title { position: absolute; top: 0px; left: 50%; transform: translateX(-50%); font-weight: bold; font-size: 14px; }
    </style>
</head>
<body>
    <h1>Calculadora de Troca Térmica - Leite e Água</h1>

    <label for="leiteTemp">Temperatura inicial do leite (°C):</label>
    <input type="number" id="leiteTemp" value="65.0"><br><br>

    <label for="aguaTemp">Temperatura inicial da água (°C):</label>
    <input type="number" id="aguaTemp" value="20.0"><br><br>

    <label for="pontos">Número de pontos intermediários:</label>
    <input type="number" id="pontos" value="3" min="1"><br><br>

    <label for="mLeite">Massa do leite (kg):</label>
    <input type="number" id="mLeite" value="10"><br><br>

    <label for="cLeite">Calor específico do leite (kJ/kg°C):</label>
    <input type="number" id="cLeite" value="3.9"><br><br>

    <label for="mAgua">Massa da água (kg):</label>
    <input type="number" id="mAgua" value="15"><br><br>

    <label for="cAgua">Calor específico da água (kJ/kg°C):</label>
    <input type="number" id="cAgua" value="4.18"><br><br>

    <label for="U">Coeficiente global U (kW/m²°C):</label>
    <input type="number" id="U" value="1.5"><br><br>

    <label for="A">Área de troca A (m²):</label>
    <input type="number" id="A" value="5"><br><br>

    <button onclick="calcularTemperaturas()">Calcular</button>

    <h2>Resultados:</h2>
    <div id="results"></div>

    <h2>Diagrama:</h2>
    <div id="diagram">
        <div class="title">Trocador de Calor - Esquema</div>
        <div class="tank" id="tank"></div>
    </div>

    <script>
        function calcularTemperaturas() {
            const T_leite = parseFloat(document.getElementById('leiteTemp').value);
            const T_agua = parseFloat(document.getElementById('aguaTemp').value);
            const pontos = parseInt(document.getElementById('pontos').value);

            const m_leite = parseFloat(document.getElementById('mLeite').value);
            const c_leite = parseFloat(document.getElementById('cLeite').value);
            const m_agua = parseFloat(document.getElementById('mAgua').value);
            const c_agua = parseFloat(document.getElementById('cAgua').value);

            const U = parseFloat(document.getElementById('U').value);
            const A = parseFloat(document.getElementById('A').value);

            let temperaturas = [];
            let T_atual = T_leite;

            for (let i = 0; i < pontos; i++) {
                T_atual = (T_atual + T_agua) / 2;
                temperaturas.push(parseFloat(T_atual.toFixed(2)));
            }

            const T_final_leite = temperaturas[temperaturas.length - 1];
            const T_final_agua = (T_leite + T_agua) / 2; // simplificação

            // Q por m·c·ΔT
            const Q_leite = m_leite * c_leite * (T_final_leite - T_leite);
            const Q_agua = m_agua * c_agua * (T_final_agua - T_agua);

            // Q por U·A·ΔTlm
            const deltaT1 = T_leite - T_final_agua;
            const deltaT2 = T_final_leite - T_agua;
            const deltaTlm = (deltaT1 - deltaT2) / Math.log(deltaT1 / deltaT2);
            const Q_UA = U * A * deltaTlm; // kW

            document.getElementById('results').innerHTML =
                "Temperaturas nos pontos: [" + temperaturas.join(", ") + "] °C<br>" +
                "Calor perdido pelo leite (m·c·ΔT): " + Q_leite.toFixed(2) + " kJ<br>" +
                "Calor ganho pela água (m·c·ΔT): " + Q_agua.toFixed(2) + " kJ<br>" +
                "Calor pela fórmula U·A·ΔTlm: " + Q_UA.toFixed(2) + " kW<br>" +
                "ΔTlm: " + deltaTlm.toFixed(2) + " °C";

            const diagramDiv = document.getElementById('diagram');
            const tank = document.getElementById('tank');

            document.querySelectorAll('.sensor, .sensor-label, .temp-label').forEach(e => e.remove());

            const tankWidth = tank.clientWidth;
            const spacing = tankWidth / (pontos + 1);

            const leiteLabel = document.createElement('div');
            leiteLabel.className = 'temp-label';
            leiteLabel.style.left = '0px';
            leiteLabel.innerHTML = `Leite ${T_leite}°C`;
            diagramDiv.appendChild(leiteLabel);

            const aguaLabel = document.createElement('div');
            aguaLabel.className = 'temp-label';
            aguaLabel.style.left = `${tankWidth - 40}px`;
            aguaLabel.innerHTML = `Água ${T_agua}°C`;
            diagramDiv.appendChild(aguaLabel);

            temperaturas.forEach((temp, index) => {
                const sensor = document.createElement('div');
                sensor.className = 'sensor';
                sensor.style.left = `${spacing * (index + 1) + 20 - 10}px`;
                sensor.style.top = '75px';
                diagramDiv.appendChild(sensor);

                const label = document.createElement('div');
                label.className = 'sensor-label';
                label.style.left = `${spacing * (index + 1) + 10}px`;
                label.innerHTML = `${temp}°C`;
                diagramDiv.appendChild(label);
            });
        }
    </script>
</body>
</html>
"""


